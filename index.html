<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Friend Cleaner</title>
<style>
body { text-align:center; font-family:Arial; background:#111; color:white; }
button { padding:12px 20px; margin:10px; font-size:18px; border:none; border-radius:10px; cursor:pointer; }
#keep { background:#3cb371; }
#remove { background:#d9534f; }
img { border-radius:50%; margin-top:20px; }
</style>
</head>
<body>

<h2>Roblox Friend Cleaner</h2>
<img id="avatar" width="150" height="150">
<h3 id="name"></h3>

<button id="keep" onclick="keepFriend()">Keep</button>
<button id="remove" onclick="removeFriend()">Unfriend</button>

<script>
let index = 0;
let data = [];

async function getUserId() {
    const r = await fetch("https://users.roblox.com/v1/users/authenticated", {
        credentials: "include"
    });
    const j = await r.json();
    return j.id;
}

async function loadFriends() {
    const userId = await getUserId();
    const r = await fetch(`https://friends.roblox.com/v1/users/${userId}/friends`, {
        credentials: "include"
    });
    data = await r.json();
    showFriend();
}

function showFriend() {
    if (!data.data || index >= data.data.length) {
        document.body.innerHTML = "<h1>✅ Done — No More Friends</h1>";
        return;
    }
    const f = data.data[index];
    document.getElementById("avatar").src = `https://www.roblox.com/headshot-thumbnail/image?userId=${f.id}&width=150&height=150&format=png`;
    document.getElementById("name").innerText = f.name;
}

window.keepFriend = () => {
    index++;
    showFriend();
};

window.removeFriend = async () => {
    const f = data.data[index];
    await fetch(`https://friends.roblox.com/v1/users/${f.id}/unfriend`, {
        method: "POST",
        credentials: "include"
    });
    index++;
    showFriend();
};

loadFriends();
</script>

</body>
</html>
